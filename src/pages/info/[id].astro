---
import { firms } from "@/libs/data/firms";
import BusinessInfo from "@/components/reviews/BusinessInfo.astro";
import TechInfo from "@/components/reviews/TechInfo.astro";
import PlansAndConditions from "@/components/reviews/PlansAndConditions.astro";
import Rules from "@/components/reviews/Rules.astro";
import Social from "@/components/reviews/Social.astro";
import { mapIds } from "@/utils";
import hero_image from "../../../public/images/Detective-office.webp";
import Layout from "@/layouts/Layout.astro";
import HeroPage from "@/components/HeroPage.astro";
import { getPathnameItems } from "@/utils";
import { info } from "@/libs/data/info";

export function getStaticPaths() {
  return mapIds(firms);
}

const items = getPathnameItems(Astro.url.pathname);
const firmName = items[items.length - 1].title;
const infoFirm = info[firmName];
---

<Layout title="ReseÃ±as">
  <main class="flex flex-col justify-center items-center min-h-[85vh]">
    <HeroPage
      hero_image={hero_image}
      title="Review"
      extraClassImage="lg:translate-y-[-180px] lg:translate-x-[50px]"
      altIndex={1}
      altTitle="Reviews"
      altUrl="/reviews"
      hasButtons
      button1Text={`Consigue ahora tu cuenta`}
      button1Link={firms[firmName].link}
      button2Text={`Promociones en ${firms[firmName].name}`}
      button2Link={`/promociones/${firmName}`}
      titleLogo={firms[firmName].logoPromos}
      titleLogoLink={firms[firmName].link}
    />
    <div class="w-full flex justify-center">
      <div
        class="flex flex-col info-design-section margin-section responsive-section
      items-center gap-[40px] w-full"
      >
        <BusinessInfo
          firm={firms[firmName]}
          hq={infoFirm?.hq}
          foundation={infoFirm?.foundation}
          ceo={infoFirm?.ceo}
          trustPilotScore={infoFirm?.trustPilotScore}
          trustPilotStars={infoFirm?.trustPilotStars}
        />

        <TechInfo
          brokers={infoFirm?.brokers}
          currency={infoFirm?.currency}
          fee={infoFirm?.fee}
          leverage={infoFirm?.leverage}
          instruments={infoFirm?.instruments}
          platforms={infoFirm?.platforms}
        />
        <PlansAndConditions
          phases={infoFirm?.phases}
          maxAllocation={infoFirm?.maxAllocation}
          depositOptions={infoFirm?.depositOptions}
          withdrawalOptions={infoFirm?.withdrawalOptions}
          scaling={infoFirm?.scaling}
          paymentType={infoFirm?.paymentType}
          priceRange={infoFirm?.priceRange}
        />
        <Rules
          minDays={infoFirm?.minDays}
          maxDays={infoFirm?.maxDays}
          news={infoFirm?.news}
          ea={infoFirm?.ea}
          stopLoss={infoFirm?.stopLoss}
          copyTrading={infoFirm.copyTrading}
          weekend={infoFirm.weekend}
        />
        <Social
          facebookLink={infoFirm?.facebookLink}
          xLink={infoFirm?.xLink}
          instagramLink={infoFirm?.instagramLink}
          tiktokLink={infoFirm?.tiktokLink}
          youtubeLink={infoFirm?.youtubeLink}
          discordLink={infoFirm?.discordLink}
          linkedinLink={infoFirm?.linkedinLink}
        />
        <div
          class="w-full flex gap-[20px] items-center md:hidden flex-col sm:flex-row"
        >
          <a class="w-full" href={firms[firmName].link}>
            <button
              class="border-[4px] border-orange text-orange
            xs:text-xl text-lg p-[10px] w-full rounded-lg shadow-[0_0px_10px_3px_rgba(217,86,19,0.5)]"
            >
              Consigue ahora tu cuenta
            </button>
          </a>
          <a class="w-full" href={`/promociones/${firms[firmName].name}`}>
            <button
              class="bg-orange text-[#FFF]
            xs:text-xl text-lg p-[14px] w-full rounded-lg"
            >
              Promociones en {firms[firmName].name}
            </button>
          </a>
        </div>
      </div>
    </div>
  </main>
</Layout>

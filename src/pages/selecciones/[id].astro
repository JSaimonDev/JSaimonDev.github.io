---
import Layout from "@/layouts/Layout.astro";
import hero_image from "/public/images/Archive-hero.webp";
import { mapIds } from "@/utils";
import { firms } from "@/libs/data/firms";
import HeroSection from "@/components/HeroSection.astro";
import {
  featureSelection,
  softwareSelection,
  instrumentSelection,
  brokerSelection,
} from "@/libs/data/selections";
import Breadcrumb from "@/components/breadcrumb.astro";

export function getStaticPaths() {
  return mapIds(featureSelection).concat(
    mapIds(softwareSelection),
    mapIds(instrumentSelection),
    mapIds(brokerSelection)
  );
}

const { id } = Astro.params;

let foundSelection;

if (Object.keys(featureSelection).includes(id))
  foundSelection = featureSelection;
else if (Object.keys(softwareSelection).includes(id))
  foundSelection = softwareSelection;
else if (Object.keys(instrumentSelection).includes(id))
  foundSelection = instrumentSelection;
else if (Object.keys(brokerSelection).includes(id))
  foundSelection = brokerSelection;
else
  foundSelection = {
    id: {
      name: "This list doesn't exist",
    },
  };
---

<Layout title={``}>
  <main class="min-h-[80vh] pt-[60px]">
    <!-- <HeroSection hero_image={hero_image} title="Selecciones" title="" /> -->
    <div class="w-full mb-[80px] flex justify-center">
      <div class="flex flex-col gap-[40px] mx-[20px] responsive-section">
        <Breadcrumb altIndex={2} altTitle={foundSelection[id].name}/>
        <div
          class="w-full bg-dark-grey text-[#FFF] py-[20px] px-[40px] rounded-xl"
        >
          <div class="flex justify-left flex-col gap-[15px] w-fit mb-[15px]">
            <h2 class="text-5xl">
              {foundSelection[id].name}
            </h2>
            <hr class="w-full" />
          </div>
          <p>
            {foundSelection[id].shortDescription}
          </p>
        </div>
        <ul class="ml-[40px]">
          {
            foundSelection[id].firms?.map((firm) => (
              <li class="mb-[20px]">
                <a href={firms[firm.id].link}>
                  <h3 class="text-3xl mb-[10px] flex items-center gap-[10px] cursor-pointer">
                    <img src="/icons/bullet-list.svg" class="h-[30px]" />
                    {firms[firm.id].name}
                  </h3>
                </a>
                <p class="ml-[40px]">{firm.notes}</p>
              </li>
            ))
          }
        </ul>
      </div>
    </div>
  </main>
</Layout>
